{% extends 'base_template.html.twig' %}

{% block title %}
	VHS | Liste des quizz
{% endblock %}

{% block content %}
<main class="container min-vh-100">
	{# Bouton créer un quizz collé en bas à droite de la fenêtre #}
	{# Redirige vers creationQuizz.html.twig avec l'identifiant de l'utilisateur #}
	<a href="index.php?controller=quizz&methode=creerQuizz&idUtilisateur&idQuizz={{ quiz.getId() }}" class="btn btn-primary position-fixed bottom-0 end-0 me-4 mb-4 px-6 d-flex align-items-center justify-content-center" style="border-radius: 50px; white-space: nowrap; min-width: 200px; z-index: 999;">
		<i class="bi bi-pencil" style="font-size: 1.3rem; margin-right: 0.2 rem;"></i>
		<b>Créer un quizz</b>
    </a>
    <br>
	{% if messagederreur is defined %}
		<div class="alert alert-danger bg-tercary mx-5 text-white" role="alert">
			Erreur :
			{{ messagederreur }}
		</div>
	{% endif %}
    <div class="row text-center">
	<!-- Boutons de manipulation de la page -->
        <div class="col mb-2">
            <a href="index.php?controller=quizz&methode=listeQuizz" class="btn btn-primary"><b>Voir les quizz</b></a>
        </div>
        <div class="col mb-2">
            <a href="index.php?controller=quizz&methode=afficherOngletGerer&{{ idUtilisateur }}" class="btn btn-primary"><b>Gérer mes quizz</b></a>
        </div>
    </div>
    <br>
    <div class="col">
        {% for quiz in quizz %}
            {% if quiz.getIdUtilisateur() != pseudoUtilisateur %}
                <div class="row">
					<!-- Carte de chaque quizz contenant son titre, sa description, sa difficulté, sa date de création et l'id de l'utilisateur auteur mais affiche son pseudo à la place -->
					<div class="card mb-3 bg-mydark text-white rounded">
						<div class="card-body">
							<h5 class="card-title">{{ quiz.getTitre() }}</h5>
							<br>
							<p class="card-text">{{ quiz.getDescription() }}</p>
							<small class="card-text">Difficulté : {{ quiz.getDifficulte() }}</small><br>
							<small class="card-text">Fait le {{ quiz.getDate()|date("d/m/Y")}}</small><br>
							{% if quiz.getIdUtilisateur() != idUtilisateur %}
								<small class="card-text">Par {{ quiz.getIdUtilisateur() }}</small><br>
							{% endif %}
							<br>
							<!-- Redirige vers jouerQuizz.html.twig avec l'identifiant du quizz -->
							<a href="index.php?controller=quizz&methode=jouerQuizz&idQuizz={{ quiz.getId() }}" class="btn btn-myprimary">
                                Jouer
                            </a>
						</div>
					</div>
				</div>
            {% endif %}
        {% endfor %}
		<!-- S'affiche quand l'utilisateur connecté n'a créé aucun quizz -->
        {% if idUtilisateur != null and quizz == null %}
			<p> Vous n'avez créé aucun quizz. </p>
		{% endif %}
    </div>
</main>

{% endblock %}