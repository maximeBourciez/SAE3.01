{% extends 'base_template.html.twig' %}

{% block title %}
	VHS | Liste des quizz
{% endblock %}

{% block content %}
<main class="container flex-fill">
	{# Bouton cr√©er un quizz coll√© en bas √† droite de la fen√™tre #}
	{# Redirige vers creationQuizz.html.twig avec l'identifiant de l'utilisateur #}
	<a href="index.php?controller=quizz&methode=afficherPageCreerQuizz&idUtilisateur&idQuizz={{ quiz.getId() }}" class="btn btn-primary position-fixed bottom-0 end-0 me-4 mb-4 px-6 d-flex align-items-center justify-content-center" style="border-radius: 50px; white-space: nowrap; min-width: 200px; z-index: 999;">
		<i class="bi bi-pencil" style="font-size: 1.3rem; margin-right: 0.2 rem;"></i>
		<b>Cr√©er un quizz</b>
    </a>
    <br>
	{% if messagederreur is defined %}
		<div class="alert alert-danger bg-tercary mx-5 text-white" role="alert">
			Erreur :
			{{ messagederreur }}
		</div>
	{% endif %}
	{% if messageConfirmation is defined %}
		<div class="alert alert-success bg-secondary mx-5 text-white" role="alert">
			{{ messageConfirmation }}
		</div>
	{% endif %}
    <div class="row text-center mb-3">
	<!-- Boutons de manipulation de la page -->
        <div class="row col mb-2 me-4">
            <a href="index.php?controller=quizz&methode=listeQuizz" class="btn btn-primary">
				<b>Voir les quizz</b>
			</a>
        </div>
        <div class="row col mb-2">
            <a href="index.php?controller=quizz&methode=afficherOngletGerer&idUtilisateur" class="btn btn-primary">
				<b>G√©rer mes quizz</b>
			</a>
        </div>
    </div>
    <div class="col">
		{% for quiz in quizz %}
			{% if boutonVoirAppuye is defined or messagederreur is defined %}
				<!-- Afficher les quizz cr√©√©s par d'autres utilisateurs -->
				{% if quiz.getIdUtilisateur() != pseudoUtilisateur %}
					<div class="row">
						<div class="card mb-3 bg-mydark text-white rounded">
							<div class="card-body">
								<h5 class="card-title mb-3">{{ quiz.getTitre() }}</h5>
								<p class="card-text">{{ quiz.getDescription() }}</p>
								<small class="card-text">Difficult√© : {{ quiz.getDifficulte() }}</small><br>
								<small class="card-text">Fait le {{ quiz.getDate()|date("d/m/Y")}}</small><br>
								<small class="card-text">Par {{ quiz.getIdUtilisateur() }}</small><br>
								<br>
								<a href="index.php?controller=quizz&methode=jouerQuizz&idQuizz={{ quiz.getId() }}" class="btn btn-myprimary">
									Jouer
								</a>
							</div>
						</div>
					</div>
				{% endif %}
			{% elseif boutonGererAppuye is defined %}
				<!-- Afficher les quizz cr√©√©s par l'utilisateur connect√© -->
				{% if quiz.getIdUtilisateur() == pseudoUtilisateur %}
					<div class="row">
						<div class="card mb-3 bg-mydark text-white rounded">
							<div class="card-body">
								<h5 class="card-title mb-3">{{ quiz.getTitre() }}</h5>
								<p class="card-text">{{ quiz.getDescription() }}</p>
								<small class="card-text">Difficult√© : {{ quiz.getDifficulte() }}</small><br>
								<small class="card-text">Fait le {{ quiz.getDate()|date("d/m/Y")}}</small><br>
								<br>
								<div class="row">
									<a href="index.php?controller=quizz&methode=supprimerQuizz&idQuizz={{ quiz.getId() }}" class="col btn btn-tercary">
										üóëÔ∏è Supprimer
									</a>
								</div>
							</div>
						</div>
					</div>
				{% endif %}
			{% endif %}
		{% endfor %}
		<!-- S'affiche quand l'utilisateur connect√© n'a cr√©√© aucun quizz -->
        {% if idUtilisateur != null and quizz == null %}
			<h5>Vous n'avez cr√©√© aucun quizz.</h5>
		{% endif %}
    </div>
</main>

{% endblock %}