{% extends 'base_template.html.twig' %}


{% block content %}
	<main class="content row flex-grow-1">
		<form action="index.php?controller=utilisateur&methode=checkInfoInscription" method="POST" class="text-center col-12 col-md-8 col-lg-6 mx-auto my-auto p-4 text-white rounded">
			{% if message is defined %}
				<div class="alert alert-success text-black" role="alert">
					{{message}}
				</div>
			{% endif %}
			<img src="{{ constant('WEBSITE_LOGO') }}" height="95" width="155" alt="VHS Logo" class="mx-auto my-2">
			<div class="bg-mydark text-white rounded p-4 mb-5">
				<h3 class="mb-3">Inscription</h3>

				{% if messagederreur is defined %}
					<div class="alert alert-danger bg-tercary mx-5" role="alert">
						Erreur :
						{{ messagederreur }}</div>

				{% endif %}

				<!-- Champ Identifiant -->
				<div class="form-group mb-3">
					<label for="idantifiant" class="d-block text-start mb-0">Identifiant *</label>
					<input type="text" name="idantifiant" id="idantifiant" class="form-control" minlength="3" maxlength="20" placeholder="Identifiant" required>
				</div>

				<!-- Champ Pseudo -->
				<div class="form-group mb-3">
					<label for="pseudo" class="d-block text-start mb-0">Pseudo *</label>
					<input type="text" name="pseudo" id="pseudo" class="form-control" minlength="3" maxlength="50" placeholder="Pseudo" required>
				</div>

				<!-- Champ Nom -->
				<div class="form-group mb-3">
					<label for="nom" class="d-block text-start mb-0">Nom réel *</label>
					<input type="text" name="nom" id="nom" class="form-control" minlength="3" maxlength="50" placeholder="Nom réel" required>
				</div>
				<!-- Champ date naisance -->
				<div class="form-group mb-3">
					<label for="date" class="d-block text-start mb-0">Date de naisance *</label>
					<input type="date" name="date" id="date" class="form-control" required>
				</div>

				<!-- Champ Mail -->
				<div class="form-group mb-3">
					<label for="mail" class="d-block text-start mb-0">Mail *</label>
					<input type="email" name="mail" id="mail" class="form-control" minlength="6" maxlength="320" placeholder="Mail" pattern="[^@\s]+@[^@\s]+\.[^@\s]+" title="adresse mail non valide " required>
				</div>

				<!-- Champ Mot de Passe -->
				<div class="form-group mb-3">
					<label for="mdp" class="d-block text-start mb-0">Mot de passe *</label>
					<input type="password" name="mdp" id="mdp" class="form-control" minlength="8" placeholder="Mot de passe" pattern="^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$" required title="Le mot de passe doit contenir au moins 8 caractères, une lettre majuscule, une lettre minuscule, un chiffre et un caractère spécial.">
				</div>

				<!-- Champ Vérification Mot de Passe -->
				<div class="form-group mb-4">
					<label for="vmdp" class="d-block text-start mb-0 bor">Confirmez le mot de passe *</label>
					<input type="password" name="vmdp" id="vmdp" class="form-control" minlength="8" placeholder="Mot de passe de confirmation" pattern="^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$" required title="Le mot de passe doit contenir au moins 8 caractères, une lettre majuscule, une lettre minuscule, un chiffre et un caractère spécial.">
				</div>
				<!-- Champ  Accepter les conditions d'utilisation-->
				<div class="form-check mb-4">

					<input type="checkbox" name="conditions" id="conditions" class="form-check-input"  required title="Veuillez accepter les conditions d'utilisation pour pouvoir créer votre compte">
					<label class="d-block text-start form-check-label mb-0" for="conditions">
						<a class="" data-bs-toggle="modal" data-bs-target="#afficherconditions">
							Accepter les conditions d'utilisation
						</a>
					</label>
				</div>
				<p class="text-start" > * Champs obligatoires</p>
				<!-- Bouton de soumission -->
				<input
				type="submit" class="btn btn-myprimary my-2 w-50 mx-auto" value="Créer le compte">

				<!-- Lien vers la connexion -->
				<div class="mt-3">
					<a href="index.php?controller=utilisateur&methode=connexion" class="text-white">Se connecter</a>
				</div>	
				
				<!-- Lien vers le modal des condition d'utilisation-->
				{% include 'modals.html.twig' with { 'last_update_date': '08/01/2025' } %}
				
			</form>
			<script src ="JS/utilisateur.js" > </script>
			<script>
				document.addEventListener("DOMContentLoaded", function() { 
					const mdp = document.getElementById('mdp');
					const vmdp = document.getElementById('vmdp');


					// Appel de verifieregau pour vérifier les valeurs
					verifieregau(mdp, vmdp);
					verificcationMail("mail")
					verificcationMDP("mdp");
					verificcationMDP("vmdp");
					tropcourt("mdp",8);
					tropcourt("vmdp",8);
					tropcourt("mail",6)
					tropcourt("pseudo",3)
					tropcourt("idantifiant",3)
					troplong("mail",320);
					troplong("pseudo",50)
					troplong("idantifiant",20)
				});
 			</script>
		</main>
		


	{% endblock %}
